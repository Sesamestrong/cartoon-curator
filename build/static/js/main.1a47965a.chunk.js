(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(t,e,a){t.exports=a(99)},59:function(t,e,a){},63:function(t,e,a){},99:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),r=a(53),i=a.n(r),c=(a(59),a(10)),o=a.n(c),l=a(32),u=a(14),p=a(17),m=a(11),h=a(12),d=a(15),f=a(13),v=a(16),b=a(7),y=a.n(b),g=(a(63),a(64),a(65),a(84),a(98),"https://Comic-Strip-API.426729.repl.co/api");function k(t){return t.replace(/\/[^\/]*\/(.*)$/g,"$1")}var j=function(t){function e(){return Object(m.a)(this,e),Object(d.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return s.a.createElement(O,null)}}]),e}(n.Component),O=function(t){function e(t){var a;Object(m.a)(this,e),a=Object(d.a)(this,Object(f.a)(e).call(this,t));var n=new URLSearchParams(window.location.search);a.url=n,a.state={date:["year","month","day"].reduce(function(t,e){return t||!n.get(e)},!1)?new Date:new Date(n.get("year")+"-"+n.get("month")+"-"+(parseInt(n.get("day"))+1)),comics:[]};var s=n.getAll("comic");0===s.length?a.state.comics=[{id:"pearlsbeforeswine",name:"Pearls Before Swine"},{id:"dilbert-classics",name:"Dilbert Classics"},{id:"lio",name:"Lio"},{id:"calvinandhobbes",name:"Calvin and Hobbes"},{id:"foxtrot",name:"Foxtrot"},{id:"dilbert",name:"Dilbert"},{id:"garfield",name:"Garfield"}]:a.state.comics=s.map(function(t){return{id:t}});var r=y()(a.state.date).format("YYYY/MM/DD");document.title=y()(a.state.date).format("MMMM D[, ]YYYY");var i=a.state.comics.map(function(t){return Object(p.a)({},t,{date:r})});return a.state.comics=i,a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"navBar"},s.a.createElement("button",{onClick:function(){return t.addDays(-1)},className:"changeDate"},"<"),s.a.createElement("h1",{className:"title"},"Cartoon Curator"),s.a.createElement("button",{onClick:function(){return t.addDays(1)},className:"changeDate next"},">")),s.a.createElement("div",{className:"App"},this.state.comics.map(function(e,a){return s.a.createElement(D,{updateVals:function(e){return t.updateValue(a,e)},remove:function(){return t.popComic(a)},setDate:function(e){return t.setDate(a,e)},key:e.id,date:e.date,id:e.id,name:e.name})}),s.a.createElement("div",{className:"input-container"},s.a.createElement("input",{type:"button",onClick:function(){return t.addComic()},className:"plus",value:"+"}))))}},{key:"addComic",value:function(){this.setState({comics:[].concat(Object(u.a)(this.state.comics),[{id:"",name:"",date:y()(this.state.date).format("YYYY/MM/DD")}])})}},{key:"updateValue",value:function(t,e){var a=Object(u.a)(this.state.comics);a[t]=Object.assign({},a[t],e),this.setURL(a),this.setState({comics:a})}},{key:"setDate",value:function(t,e){console.log("setDate",e);var a=Object(u.a)(this.state.comics),n=Object(p.a)({},a[t]);n.date=k(e),a[t]=n,this.setState({comics:a})}},{key:"popComic",value:function(t){var e=Object(u.a)(this.state.comics),a=e.splice(t,1);return this.setState({comics:e}),a}},{key:"addDays",value:function(t){var e=new Date(this.state.date);e.setDate(this.state.date.getDate()+t),this.applyDate(e)}},{key:"applyDate",value:function(t){var e=y()(t).format("YYYY/MM/DD"),a=this.state.comics.map(function(t){return Object(p.a)({},t,{date:e})});this.setURL(void 0,e),this.setState({date:t,comics:a})}},{key:"setURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.date,a=y()(e);if(t){this.url.delete("comic");var n=!0,s=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;this.url.append("comic",o.id)}}catch(l){s=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}}e&&(this.url.set("year",a.format("YYYY")),this.url.set("month",a.format("MM")),this.url.set("day",a.format("DD"))),window.history.pushState(e,y()(e).format("MMMM D[,] YYYY"),"?"+this.url.toString())}}]),e}(n.Component),D=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).state={date:a.props.date,path:"",strips:{},shown:!0,id:a.props.id,name:a.props.name},a.state.id&&(a.state.path=a.getPath(),a.findUrl(a.state.path)),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;console.log("Woohoo, starting render and",this.state.date),this.findUrl();var e=this.state.strips[this.state.path]||{};return""!==this.state.path&&this.state.id?e.url?s.a.createElement("div",{className:"comic-container"},s.a.createElement("h2",null,this.state.name),s.a.createElement("p",null,k(this.state.path)),s.a.createElement("span",{role:"img","aria-label":"Delete",onClick:this.props.remove},"\u274c"),s.a.createElement("span",{className:"comic"},s.a.createElement("input",{type:"button",onClick:function(){console.log(e.previous,"bluh"),t.props.setDate(e.previous)},value:"\u2190",className:"arrow"}),s.a.createElement("img",{ref:"next",alt:"",style:{display:"none"},src:(this.state.strips[e.previous]||{}).url}),s.a.createElement("span",null,s.a.createElement("img",{ref:"this",alt:this.state.name||this.state.id+" comic strip",src:e.url,onClick:function(){return t.props.setDate(e.previous)}})),s.a.createElement("img",{ref:"last",alt:"",style:{display:"none"},src:(this.state.strips[e.next]||{}).url}),s.a.createElement("input",{type:"button",onClick:function(){return t.props.setDate(e.next)},value:"\u2192",className:"arrow"}))):null:s.a.createElement("div",{className:"input-container"},s.a.createElement(E,{updateValue:function(e){return t.props.updateVals({id:e.id,name:e.name})}}))}},{key:"findUrl",value:function(){var t=Object(l.a)(o.a.mark(function t(e){var a,n,s,r,i,c,l,u,p,m;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||this.getPath(),n={},Object.keys(this.state.strips).includes(e)){t.next=16;break}return s="".concat(g).concat(e),t.next=6,fetch(s);case 6:return r=t.sent,t.next=9,r.json();case 9:if(!(r=t.sent).error){t.next=12;break}return t.abrupt("return",console.log(s,"failed"));case 12:a=r,console.log(r),t.next=17;break;case 16:a=this.state.strips[e];case 17:n[e]=a,this.state.path!==e&&(console.log(this.state.path,e),this.setState({path:e})),i=0,c=["previous","next"];case 20:if(!(i<c.length)){t.next=43;break}if(l=c[i],this.state.strips[a[l]]||!a[l]||""===a[l]){t.next=39;break}return u="".concat(g).concat(a[l]),t.next=26,fetch(u);case 26:return p=t.sent,t.prev=27,t.next=30,p.json();case 30:p=t.sent,t.next=36;break;case 33:return t.prev=33,t.t0=t.catch(27),t.abrupt("continue",40);case 36:n[a[l]]=p,t.next=40;break;case 39:n[a[l]]=this.state.strips[a[l]];case 40:i++,t.next=20;break;case 43:m=Object.keys(this.state.strips),Object.keys(n).filter(function(t){return!m.includes(t)}).length>0&&(console.log("strips"),this.setState({strips:n}));case 45:case"end":return t.stop()}},t,this,[[27,33]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.date;return console.log("getPath",this.state.date),"/".concat(this.state.id,"/").concat(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){return console.log("At gds",t.date),t.date!==e.date?{date:t.date}:null}}]),e}(n.Component),E=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).state={strips:{Select:""}},a.findStrips(),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("select",{className:"comic-choice",onChange:function(e){return t.props.updateValue({name:e.target.value,id:t.state.strips[e.target.value]})}},Object.keys(this.state.strips).map(function(t){return s.a.createElement("option",{key:t,value:t},t)}))}},{key:"findStrips",value:function(){var t=Object(l.a)(o.a.mark(function t(){var e,a,n,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/ids"));case 2:return e=t.sent,t.next=5,e.json();case 5:for(e=t.sent,a={Select:""},n=0,s=Object.keys(e);n<s.length;n++)r=s[n],a=Object(p.a)({},a,e[r]);this.setState({strips:a});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(n.Component),x=j;i.a.render(s.a.createElement(x,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.1a47965a.chunk.js.map