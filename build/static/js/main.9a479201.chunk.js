(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(t,e,a){t.exports=a(99)},59:function(t,e,a){},63:function(t,e,a){},99:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(53),i=a.n(s),c=(a(59),a(10)),o=a.n(c),u=a(32),l=a(14),p=a(17),m=a(11),h=a(12),d=a(15),f=a(13),v=a(16),b=a(7),y=a.n(b),k=(a(63),a(64),a(65),a(84),a(98),"https://Comic-Strip-API.426729.repl.co");function j(t){return t.replace(/\/[^\/]*\/(.*)$/g,"$1")}var O=function(t){function e(){return Object(m.a)(this,e),Object(d.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement(g,null)}}]),e}(n.Component),g=function(t){function e(t){var a;Object(m.a)(this,e),a=Object(d.a)(this,Object(f.a)(e).call(this,t));var n=new URLSearchParams(window.location.search);a.url=n,a.state={date:["year","month","day"].reduce(function(t,e){return t||!n.get(e)},!1)?new Date:new Date(n.get("year")+"-"+n.get("month")+"-"+(parseInt(n.get("day"))+1)),comics:[]};var r=n.getAll("comic");0===r.length?a.state.comics=[{id:"pearlsbeforeswine",name:"Pearls Before Swine"},{id:"dilbert-classics",name:"Dilbert Classics"},{id:"lio",name:"Lio"},{id:"calvinandhobbes",name:"Calvin and Hobbes"},{id:"foxtrot",name:"Foxtrot"},{id:"dilbert",name:"Dilbert"},{id:"garfield",name:"Garfield"}]:a.state.comics=r.map(function(t){return{id:t}});var s=y()(a.state.date).format("YYYY/MM/DD");document.title=y()(a.state.date).format("MMMM D[, ]YYYY");var i=a.state.comics.map(function(t){return Object(p.a)({},t,{date:s})});return a.state.comics=i,a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navBar"},r.a.createElement("button",{onClick:function(){return t.addDays(-1)},className:"changeDate"},"<"),r.a.createElement("h1",{className:"title"},"Cartoon Curator"),r.a.createElement("button",{onClick:function(){return t.addDays(1)},className:"changeDate next"},">")),r.a.createElement("div",{className:"App"},this.state.comics.map(function(e,a){return r.a.createElement(D,{updateVals:function(e){return t.updateValue(a,e)},remove:function(){return t.popComic(a)},setDate:function(e){return t.setDate(a,e)},key:e.id,date:e.date,id:e.id,name:e.name})}),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{type:"button",onClick:function(){return t.addComic()},className:"plus",value:"+"}))))}},{key:"addComic",value:function(){this.setState({comics:[].concat(Object(l.a)(this.state.comics),[{id:"",name:"",date:y()(this.state.date).format("YYYY/MM/DD")}])})}},{key:"updateValue",value:function(t,e){var a=Object(l.a)(this.state.comics);a[t]=Object.assign({},a[t],e),this.setURL(a),this.setState({comics:a})}},{key:"setDate",value:function(t,e){var a=Object(l.a)(this.state.comics),n=Object(p.a)({},a[t]);n.date=j(e),a[t]=n,this.setState({comics:a})}},{key:"popComic",value:function(t){var e=Object(l.a)(this.state.comics),a=e.splice(t,1);return this.setState({comics:e}),a}},{key:"addDays",value:function(t){var e=new Date(this.state.date);e.setDate(this.state.date.getDate()+t),this.applyDate(e)}},{key:"applyDate",value:function(t){var e=y()(t).format("YYYY/MM/DD"),a=this.state.comics.map(function(t){return Object(p.a)({},t,{date:e})});this.setURL(void 0,e),this.setState({date:t,comics:a})}},{key:"setURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.date,a=y()(e);if(t){this.url.delete("comic");var n=!0,r=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;this.url.append("comic",o.id)}}catch(u){r=!0,s=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}}e&&(this.url.set("year",a.format("YYYY")),this.url.set("month",a.format("MM")),this.url.set("day",a.format("DD"))),window.history.pushState(e,y()(e).format("MMMM D[,] YYYY"),"?"+this.url.toString())}}]),e}(n.Component),D=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).state={date:a.props.date,path:"",strips:{},shown:!0,id:a.props.id,name:a.props.name},a.state.id&&(a.state.path=a.getPath(),a.findUrl(a.state.path)),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;this.findUrl();var e=this.state.strips[this.state.path]||{};return""!==this.state.path&&this.state.id?e.url?r.a.createElement("div",{className:"comic-container"},r.a.createElement("h2",null,this.state.name),r.a.createElement("p",null,j(this.state.path)),r.a.createElement("span",{role:"img","aria-label":"Delete",onClick:this.props.remove},"\u274c"),r.a.createElement("span",{className:"comic"},r.a.createElement("input",{type:"button",onClick:function(){return t.props.setDate(e.previous)},value:"\u2190",className:"arrow"}),r.a.createElement("img",{ref:"next",alt:"",style:{display:"none"},src:(this.state.strips[e.previous]||{}).url}),r.a.createElement("span",null,r.a.createElement("img",{ref:"this",alt:this.state.name||this.state.id+" comic strip",src:e.url,onClick:function(){return t.props.setDate(e.previous)}})),r.a.createElement("img",{ref:"last",alt:"",style:{display:"none"},src:(this.state.strips[e.next]||{}).url}),r.a.createElement("input",{type:"button",onClick:function(){return t.props.setDate(e.next)},value:"\u2192",className:"arrow"}))):null:r.a.createElement("div",{className:"input-container"},r.a.createElement(E,{updateValue:function(e){return t.props.updateVals({id:e.id,name:e.name})}}))}},{key:"findUrl",value:function(){var t=Object(u.a)(o.a.mark(function t(e){var a,n,r,s,i,c,u,l,p,m;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||this.getPath(),n={},Object.keys(this.state.strips).includes(e)){t.next=15;break}return r="".concat(k,"/api").concat(e),t.next=6,fetch(r);case 6:return s=t.sent,t.next=9,s.json();case 9:if(!(s=t.sent).error){t.next=12;break}return t.abrupt("return",console.log(r,"failed"));case 12:a=s,t.next=16;break;case 15:a=this.state.strips[e];case 16:n[e]=a,this.state.path!==e&&this.setState({path:e}),i=0,c=["previous","next"];case 19:if(!(i<c.length)){t.next=42;break}if(u=c[i],this.state.strips[a[u]]||!a[u]||""===a[u]){t.next=38;break}return l="".concat(k,"/api").concat(a[u]),t.next=25,fetch(l);case 25:return p=t.sent,t.prev=26,t.next=29,p.json();case 29:p=t.sent,t.next=35;break;case 32:return t.prev=32,t.t0=t.catch(26),t.abrupt("continue",39);case 35:n[a[u]]=p,t.next=39;break;case 38:n[a[u]]=this.state.strips[a[u]];case 39:i++,t.next=19;break;case 42:m=Object.keys(this.state.strips),Object.keys(n).filter(function(t){return!m.includes(t)}).length>0&&this.setState({strips:n});case 44:case"end":return t.stop()}},t,this,[[26,32]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.date;return"/".concat(this.state.id,"/").concat(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.date!==e.date?{date:t.date}:null}}]),e}(n.Component),E=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).state={strips:{Select:""}},a.findStrips(),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("select",{className:"comic-choice",onChange:function(e){return t.props.updateValue({name:e.target.value,id:t.state.strips[e.target.value]})}},Object.keys(this.state.strips).map(function(t){return r.a.createElement("option",{key:t,value:t},t)}))}},{key:"findStrips",value:function(){var t=Object(u.a)(o.a.mark(function t(){var e,a,n,r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(k,"/ids"));case 2:return e=t.sent,t.next=5,e.json();case 5:for(e=t.sent,a={Select:""},n=0,r=Object.keys(e);n<r.length;n++)s=r[n],a=Object(p.a)({},a,e[s]);this.setState({strips:a});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(n.Component),x=O;i.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.9a479201.chunk.js.map