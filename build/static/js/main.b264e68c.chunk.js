(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(72),i=a.n(s),c=(a(78),a(18)),o=a.n(c),u=a(47),l=a(22),p=a(25),m=a(19),h=a(20),d=a(23),f=a(21),v=a(24),b=a(9),y=a.n(b),k=(a(82),a(83),a(84),a(118),a(122),a(126),function(t){function e(){return Object(m.a)(this,e),Object(d.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement(j,null)}}]),e}(n.Component)),j=function(t){function e(t){var a;Object(m.a)(this,e),a=Object(d.a)(this,Object(f.a)(e).call(this,t));var n=new URLSearchParams(window.location.search);a.url=n,a.state={date:["year","month","day"].reduce(function(t,e){return t||!n.get(e)},!1)?new Date:new Date(n.get("year")+"-"+n.get("month")+"-"+(parseInt(n.get("day"))+1)),comics:[]};var r=n.getAll("comic");0===r.length?a.state.comics=[{id:"pearlsbeforeswine",name:"Pearls Before Swine"},{id:"dilbert-classics",name:"Dilbert Classics"},{id:"lio",name:"Lio"},{id:"calvinandhobbes",name:"Calvin and Hobbes"},{id:"foxtrot",name:"Foxtrot"},{id:"dilbert",name:"Dilbert"},{id:"garfield",name:"Garfield"}]:a.state.comics=r.map(function(t){return{id:t}});var s=y()(a.state.date).format("YYYY/MM/DD");document.title=y()(a.state.date).format("MMMM D[, ]YYYY");var i=a.state.comics.map(function(t){return Object(p.a)({},t,{date:s})});return a.state.comics=i,a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navBar"},r.a.createElement("button",{onClick:function(){return t.addDays(-1)},className:"changeDate"},"<"),r.a.createElement("h1",{className:"title"},"Cartoon Curator"),r.a.createElement("button",{onClick:function(){return t.addDays(1)},className:"changeDate next"},">")),r.a.createElement("div",{className:"App"},this.state.comics.map(function(e,a){return r.a.createElement(O,{updateVals:function(e){return t.updateValue(a,e)},remove:function(){return t.popComic(a)},setDate:function(e){return t.setDate(a,e)},key:e.id,date:e.date,id:e.id,name:e.name})}),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{type:"button",onClick:function(){return t.addComic()},className:"plus",value:"+"}))))}},{key:"addComic",value:function(){this.setState({comics:[].concat(Object(l.a)(this.state.comics),[{id:"",name:"",date:y()(this.state.date).format("YYYY/MM/DD")}])})}},{key:"updateValue",value:function(t,e){var a=Object(l.a)(this.state.comics);a[t]=Object.assign({},a[t],e),this.setURL(a),this.setState({comics:a})}},{key:"setDate",value:function(t,e){var a=Object(l.a)(this.state.comics),n=Object(p.a)({},a[t]);n.date=e.replace(/\/[^\/]*\/(.*)$/g,"$1"),a[t]=n,this.setState({comics:a})}},{key:"popComic",value:function(t){var e=Object(l.a)(this.state.comics),a=e.splice(t,1);return this.setState({comics:e}),a}},{key:"addDays",value:function(t){var e=new Date(this.state.date);e.setDate(this.state.date.getDate()+t),this.applyDate(e)}},{key:"applyDate",value:function(t){var e=y()(t).format("YYYY/MM/DD"),a=this.state.comics.map(function(t){return Object(p.a)({},t,{date:e})});this.setURL(void 0,e),this.setState({date:t,comics:a})}},{key:"setURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.date,a=y()(e);if(t){this.url.delete("comic");var n=!0,r=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;this.url.append("comic",o.id)}}catch(u){r=!0,s=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}}e&&(this.url.set("year",a.format("YYYY")),this.url.set("month",a.format("MM")),this.url.set("day",a.format("DD"))),window.history.pushState(e,y()(e).format("MMMM D[,] YYYY"),"?"+this.url.toString())}}]),e}(n.Component),O=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).date=a.props.date,a.state={path:"",strips:{},shown:!0,id:a.props.id,name:a.props.name},a.state.id&&(a.state.path=a.getPath(),a.findUrl(a.state.path)),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;this.date=this.props.date,this.findUrl();var e=this.state.strips[this.state.path]||{};return""!==this.state.path&&this.state.id?e.url?r.a.createElement("div",{className:"comic-container"},r.a.createElement("h2",null,this.state.name),r.a.createElement("p",null,this.state.path.replace(/^\/[^\/]+\/(.*)$/g,"$1")),r.a.createElement("span",{onClick:this.props.remove},"\u274c"),r.a.createElement("span",{className:"comic"},r.a.createElement("input",{type:"button",onClick:function(){return t.findUrl(e.previous)},value:"\u2190",className:"arrow"}),r.a.createElement("img",{ref:"next",style:{display:"none"},src:(this.state.strips[e.previous]||{}).url,onClick:function(){return t.findUrl(e.previous)}}),r.a.createElement("span",null,r.a.createElement("img",{ref:"this",src:e.url,onClick:function(){return t.findUrl(e.previous)}})),r.a.createElement("img",{ref:"last",style:{display:"none"},src:(this.state.strips[e.next]||{}).url,onClick:function(){return t.findUrl(e.previous)}}),r.a.createElement("input",{type:"button",onClick:function(){return t.findUrl(e.next)},value:"\u2192",className:"arrow"}))):null:r.a.createElement("div",{className:"input-container"},r.a.createElement(g,{updateValue:function(e){t.props.updateVals({id:e.id,name:e.name}),t.state.id=e.id,t.state.name=e.name,t.state.path=t.getPath(),t.findUrl()}}))}},{key:"findUrl",value:function(){var t=Object(u.a)(o.a.mark(function t(e){var a,n,r,s,i,c,u,l,p,m;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||this.getPath(),n={},Object.keys(this.state.strips).includes(e)){t.next=16;break}return r="https://Comic-Strip-API.426729.repl.co/api".concat(e),t.next=6,fetch(r);case 6:return s=t.sent,t.next=9,s.json();case 9:if(!(s=t.sent).error){t.next=12;break}return t.abrupt("return",console.log(r,"failed"));case 12:a=s,console.log(s),t.next=17;break;case 16:a=this.state.strips[e];case 17:n[e]=a,this.state.path!==e&&this.props.setDate(e),i=0,c=["previous","next"];case 20:if(!(i<c.length)){t.next=43;break}if(u=c[i],this.state.strips[a[u]]||!a[u]||""===a[u]){t.next=39;break}return l="https://Comic-Strip-API.426729.repl.co/api".concat(a[u]),t.next=26,fetch(l);case 26:return p=t.sent,t.prev=27,t.next=30,p.json();case 30:p=t.sent,t.next=36;break;case 33:return t.prev=33,t.t0=t.catch(27),t.abrupt("continue",40);case 36:n[a[u]]=p,t.next=40;break;case 39:n[a[u]]=this.state.strips[a[u]];case 40:i++,t.next=20;break;case 43:m=Object.keys(this.state.strips),Object.keys(n).filter(function(t){return!m.includes(t)}).length>0&&this.setState({strips:n});case 45:case"end":return t.stop()}},t,this,[[27,33]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.date;return console.log(this.date),"/".concat(this.state.id,"/").concat(t)}}]),e}(n.Component),g=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(d.a)(this,Object(f.a)(e).call(this,t))).state={strips:{Select:""}},a.findStrips(),a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("select",{className:"comic-choice",onChange:function(e){return t.props.updateValue({name:e.target.value,id:t.state.strips[e.target.value]})}},Object.keys(this.state.strips).map(function(t){return r.a.createElement("option",{key:t,value:t},t)}))}},{key:"findStrips",value:function(){var t=Object(u.a)(o.a.mark(function t(){var e,a,n,r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comic-strip-api.426729.repl.co/ids");case 2:return e=t.sent,t.next=5,e.json();case 5:for(e=t.sent,a={Select:""},n=0,r=Object.keys(e);n<r.length;n++)s=r[n],a=Object(p.a)({},a,e[s]);this.setState({strips:a});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(n.Component),D=k;i.a.render(r.a.createElement(D,null),document.getElementById("root"))},73:function(t,e,a){t.exports=a(127)},78:function(t,e,a){},82:function(t,e,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.b264e68c.chunk.js.map