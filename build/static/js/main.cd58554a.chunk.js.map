{"version":3,"sources":["logo.svg","App.js","index.js"],"names":["module","exports","__webpack_require__","p","App","react_default","a","createElement","App_Newspaper","Component","Newspaper","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","date","window","location","pathname","Date","substr","comics","id","name","moment","format","document","title","newComics","map","comic","objectSpread","_this2","Fragment","onClick","addDays","className","i","index","App_Comic","remove","popComic","setDate","path","key","type","addComic","value","setState","concat","toConsumableArray","newThing","replace","list","ret","splice","numDays","newDate","getDate","applyDate","history","pushState","Comic","_this3","strips","shown","getPath","findUrl","_this4","console","log","thisComic","url","previous","ref","style","display","src","next","App_ComicChoice","updateValue","val","Math","random","keys","includes","fetch","json","error","order","oldKeys","filter","length","arguments","undefined","ComicChoice","_this5","Select","findStrips","_this6","onChange","event","target","newStrips","_i2","_Object$keys","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.cd58554a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport moment from \"moment\";\nimport './App.css';\n\nclass App extends Component {\n  render(){\n    return <Newspaper/>;\n  }\n}\n\nclass Newspaper extends Component {\nconstructor(props){\n    super(props);\n    this.state={date:window.location.pathname==\"/\"?new Date():new Date(window.location.pathname.substr(1)),comics:[{id:\"pearlsbeforeswine\",name:\"Pearls Before Swine\"},\n{id:\"dilbert-classics\",name:\"Dilbert Classics\"},\n{id:\"lio\",name:\"Lio\"},\n{id:\"calvinandhobbes\",name:\"Calvin and Hobbes\"},\n{id:\"foxtrot\",name:\"Foxtrot\"},\n{id:\"dilbert\",name:\"Dilbert\"},\n{id:\"garfield\",name:\"Garfield\"},]};\n  let date=moment(this.state.date).format(\"YYYY/MM/DD\");\n  document.title=moment(this.state.date).format(\"MMMM D[, ]YYYY\");\n  let newComics=this.state.comics.map(comic=>({...comic,date}));\n  this.state.comics=newComics;\n  }\n  render() {\n    //console.log(this.state.comics);\n    return (\n      <>\n      <button onClick={()=>this.addDays(-1)} className=\"changeDate\">&lt;</button>\n      <button onClick={()=>this.addDays(1)} className=\"changeDate next\">&gt;</button>\n      <div className=\"App\">\n        {this.state.comics.map((i,index)=><Comic remove={()=>this.popComic(index)} setDate={path=>this.setDate(index,path)} key={i.id} date={i.date} id={i.id} name={i.name}/>)}\n        <div className=\"input-container\">\n        <input type=\"button\" onClick={()=>this.addComic()} className=\"plus\" value=\"+\"/>\n        </div>\n      </div>\n      </>\n    );\n  }\n  addComic(){\n    this.setState({comics:[...this.state.comics,{id:\"\",name:\"\",date:moment(this.state.date).format(\"YYYY/MM/DD\")}]});\n  }\n  setDate(id,path){\n    //console.log(\"Setting date!\",this.state.comics[id],id,path);\n    let newComics=[...this.state.comics];\n    let newThing={...newComics[id]};\n    newThing.date=path.replace(/\\/[^\\/]*\\/(.*)$/g,\"$1\");\n    newComics[id]=newThing;\n    this.setState({comics:newComics});\n  }\n  popComic(index){\n    let list=[...this.state.comics];\n    let ret=list.splice(index,1);\n    this.setState({comics:list});\n    return ret;\n  }\n  addDays(numDays){\n    let newDate=new Date(this.state.date);\n    newDate.setDate(this.state.date.getDate()+numDays);\n    this.state.date=newDate;\n    this.applyDate(moment(newDate).format(\"YYYY/MM/DD\"));\n  }\n  applyDate(date){\n    let newComics=this.state.comics.map(comic=>({...comic,date}));\n    document.title=moment(date).format(\"MMMM D[, ]YYYY\");\n    window.history.pushState(date, moment(date).format(\"MMMM D[,] YYYY\"), '/'+date);\n    this.setState({comics:newComics});\n  }\n}\n\nclass Comic extends Component{\n  constructor(props){\n    super(props);\n    this.date=this.props.date;\n    this.state={path:\"\",strips:{},shown:true,id:this.props.id,name:this.props.name};\n    if(this.state.id) {\n      this.state.path=this.getPath();\n      this.findUrl(this.state.path);\n    }\n  }\n  render(){\n    this.date=this.props.date;\n    //console.log(this.props.date,\"is date at render\");\n    this.state.path=this.getPath();\n    console.log(this.state.path);\n    //console.log(\"now, path is\",this.state.path,this.date);\n    let thisComic=this.state.strips[this.state.path]||{};\n    //console.log(\"rendering in render\",this.state,\"thisComic at render\",thisComic);\n    //if(!thisComic.url)\n    this.findUrl(this.state.path);\n    return this.state.path!==\"\"&&this.state.id?\n    (\n      thisComic.url?<div className=\"comic-container\">\n        <h2>{this.state.name}</h2>\n        <p>{this.state.path.replace(/^\\/[^\\/]+\\/(.*)$/g,\"$1\")}</p>\n        <span onClick={this.props.remove}>❌</span>\n        <span className=\"comic\">\n        <input type=\"button\" onClick={()=>this.findUrl(thisComic.previous)} value=\"←\" className=\"arrow\"/>\n        <img ref=\"next\" style={{display:\"none\"}} src={(this.state.strips[thisComic.previous]||{}).url} onClick={()=>this.findUrl(thisComic.previous)}/>\n        <span>\n        <img ref=\"this\" src={thisComic.url} onClick={()=>this.findUrl(thisComic.previous)}/>\n        </span>\n        <img ref=\"last\" style={{display:\"none\"}} src={(this.state.strips[thisComic.next]||{}).url} onClick={()=>this.findUrl(thisComic.previous)}/>\n        <input type=\"button\" onClick={()=>this.findUrl(thisComic.next)} value=\"→\" className=\"arrow\"/>\n        </span>\n      </div>:null\n    ):(\n      <div className=\"input-container\">\n      <ComicChoice updateValue={(val)=>{this.state.id=val.id;this.state.name=val.name;this.state.path=this.getPath();this.findUrl();}}/>\n      </div>\n    );\n    /*\n    Old:\n    \n        <input type=\"text\" onChange={event=>{this.state.name=event.target.value;if(this.state.id)this.findUrl();}} placeholder=\"Name\"/>\n        <input type=\"text\" onChange={event=>{this.state.id=event.target.value;this.state.path=this.getPath();this.findUrl();}} placeholder=\"Comic ID\"/>\n    */\n  }\n  async findUrl(path){\n    //console.log(\"running findUrl\");\n    path=path||this.getPath();\n    let thisComic, strips={};\n    console.log(\"Finding\",path);\n    let num=Math.random();\n    if(!Object.keys(this.state.strips).includes(path)){\n      let url=`https://Comic-Strip-API.426729.repl.co/api${path}`;\n      console.log(\"trying\",url);\n      let json=await fetch(url);\n      console.log(\"Got response\");\n      json=await json.json();\n      console.log(\"Awaited\");\n      if(json.error) return console.log(url,\"failed\");\n      thisComic=json;\n      console.log(json);\n    }\n    else {\n      console.log(\"Cached\",path);\n      thisComic=this.state.strips[path];\n      //console.log(\"thisComic \",thisComic);\n    }\n    ////console.log(\"thisComic\",thisComic);\n    strips[path]=thisComic;\n    if(this.state.path!==path) {\n      this.props.setDate(path);\n    }\n    // this.setState({path});\n    for(let order of [\"previous\",\"next\"]){\n      if(!this.state.strips[thisComic[order]]&&thisComic[order]&&thisComic[order]!==\"\") {\n        //console.log(\"Not working path\",thisComic[order]);\n        let url=`https://Comic-Strip-API.426729.repl.co/api${thisComic[order]}`;\n        //console.log(url);\n        let json=await fetch(url);\n        try{json=await json.json();} catch(err){continue;}\n        //console.log(\"Adding the cache for\",thisComic[order],json.url)\n        strips[thisComic[order]]=json;\n      }\n      else {\n        strips[thisComic[order]]=this.state.strips[thisComic[order]];\n      }\n    }\n    //console.log(\"Strips\")\n    let oldKeys=Object.keys(this.state.strips);\n    if(Object.keys(strips).filter(i=>!oldKeys.includes(i)).length>0){\n    this.setState({strips});}\n  }\n  getPath(date=this.date){\n    console.log(this.date);\n    return `/${this.state.id}/${date}`;\n  }\n}\n\nclass ComicChoice extends Component{\n  constructor(props) {\n    super(props);\n    this.state={strips:{\"Select\":\"\"}};\n    this.findStrips();\n  }\n  render(){\n    return <select className=\"comic-choice\" onChange={event=>this.props.updateValue({name:event.target.value,id:this.state.strips[event.target.value]})}>\n    {Object.keys(this.state.strips).map(i=><option value={i}>{i}</option>)}\n    </select>;\n  }\n  async findStrips(){\n    let strips=await fetch(\"https://comic-strip-api.426729.repl.co/ids\");\n    strips=await strips.json();\n    let newStrips={\"Select\":\"\"};\n    for(let key of Object.keys(strips)){\n      newStrips={...newStrips,...strips[key]};\n    }\n    this.setState({strips:newStrips});\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}